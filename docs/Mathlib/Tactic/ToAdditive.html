<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.ToAdditive</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.ToAdditive";</script><script type="module" src="../.././search.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label>Documentation</h1><p class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">ToAdditive</span></p><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><h3><a class="break_within" href="#top"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">ToAdditive</span></a></h3><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Mathlib/Data/KVMap.html">Mathlib.Data.KVMap</a></li><li><a href="../.././Mathlib/Lean/EnvExtension.html">Mathlib.Lean.EnvExtension</a></li><li><a href="../.././Mathlib/Tactic/Eqns.html">Mathlib.Tactic.Eqns</a></li><li><a href="../.././Std/Lean/NameMapAttribute.html">Std.Lean.NameMapAttribute</a></li><li><a href="../.././Std/Tactic/CoeExt.html">Std.Tactic.CoeExt</a></li><li><a href="../.././Std/Tactic/Lint.html">Std.Tactic.Lint</a></li><li><a href="../.././Mathlib/Data/Array/Defs.html">Mathlib.Data.Array.Defs</a></li><li><a href="../.././Mathlib/Data/String/Defs.html">Mathlib.Data.String.Defs</a></li><li><a href="../.././Mathlib/Lean/Expr/ReplaceRec.html">Mathlib.Lean.Expr.ReplaceRec</a></li><li><a href="../.././Mathlib/Lean/Meta/Simp.html">Mathlib.Lean.Meta.Simp</a></li><li><a href="../.././Mathlib/Tactic/Relation/Rfl.html">Mathlib.Tactic.Relation.Rfl</a></li><li><a href="../.././Mathlib/Tactic/Relation/Symm.html">Mathlib.Tactic.Relation.Symm</a></li><li><a href="../.././Mathlib/Tactic/Relation/Trans.html">Mathlib.Tactic.Relation.Trans</a></li><li><a href="../.././Mathlib/Tactic/Simps/Basic.html">Mathlib.Tactic.Simps.Basic</a></li><li><a href="../.././Std/Data/Option/Basic.html">Std.Data.Option.Basic</a></li><li><a href="../.././Std/Tactic/Ext/Attr.html">Std.Tactic.Ext.Attr</a></li><li><a href="../.././Mathlib/Init/Data/Nat/Notation.html">Mathlib.Init.Data.Nat.Notation</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.ToAdditive" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#to_additive_ignore_args"><span class="name">to_additive_ignore_args</span></a></div><div class="nav_link"><a class="break_within" href="#to_additive_relevant_arg"><span class="name">to_additive_relevant_arg</span></a></div><div class="nav_link"><a class="break_within" href="#to_additive_reorder"><span class="name">to_additive_reorder</span></a></div><div class="nav_link"><a class="break_within" href="#to_additive_change_numeral"><span class="name">to_additive_change_numeral</span></a></div><div class="nav_link"><a class="break_within" href="#toAdditiveAttrOption"><span class="name">toAdditiveAttrOption</span></a></div><div class="nav_link"><a class="break_within" href="#toAdditiveReorderOption"><span class="name">toAdditiveReorderOption</span></a></div><div class="nav_link"><a class="break_within" href="#toAdditiveParenthesizedOption"><span class="name">toAdditiveParenthesizedOption</span></a></div><div class="nav_link"><a class="break_within" href="#toAdditiveOption"><span class="name">toAdditiveOption</span></a></div><div class="nav_link"><a class="break_within" href="#toAdditiveRest"><span class="name">toAdditiveRest</span></a></div><div class="nav_link"><a class="break_within" href="#to_additive"><span class="name">to_additive</span></a></div><div class="nav_link"><a class="break_within" href="#attrTo_additive?_"><span class="name">attrTo_additive?_</span></a></div><div class="nav_link"><a class="break_within" href="#endCapitalNames"><span class="name">endCapitalNames</span></a></div><div class="nav_link"><a class="break_within" href="#String.splitCase"><span class="name">String</span>.<span class="name">splitCase</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.linter.toAdditiveReorder"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">toAdditiveReorder</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.linter.existingAttributeWarning"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">existingAttributeWarning</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.linter.toAdditiveGenerateName"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">toAdditiveGenerateName</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.linter.toAdditiveExisting"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">toAdditiveExisting</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.ignoreArgsAttr"><span class="name">ToAdditive</span>.<span class="name">ignoreArgsAttr</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.reorderAttr"><span class="name">ToAdditive</span>.<span class="name">reorderAttr</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.relevantArgAttr"><span class="name">ToAdditive</span>.<span class="name">relevantArgAttr</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.changeNumeralAttr"><span class="name">ToAdditive</span>.<span class="name">changeNumeralAttr</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.translations"><span class="name">ToAdditive</span>.<span class="name">translations</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.findTranslation?"><span class="name">ToAdditive</span>.<span class="name">findTranslation?</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.insertTranslation"><span class="name">ToAdditive</span>.<span class="name">insertTranslation</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.Config"><span class="name">ToAdditive</span>.<span class="name">Config</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.instReprConfig"><span class="name">ToAdditive</span>.<span class="name">instReprConfig</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.additiveTestUnsafe"><span class="name">ToAdditive</span>.<span class="name">additiveTestUnsafe</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.additiveTestUnsafe.visit"><span class="name">ToAdditive</span>.<span class="name">additiveTestUnsafe</span>.<span class="name">visit</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.additiveTest"><span class="name">ToAdditive</span>.<span class="name">additiveTest</span></a></div><div class="nav_link"><a class="break_within" href="#List.swapFirstTwo"><span class="name">List</span>.<span class="name">swapFirstTwo</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.changeNumeral"><span class="name">ToAdditive</span>.<span class="name">changeNumeral</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.applyReplacementFun"><span class="name">ToAdditive</span>.<span class="name">applyReplacementFun</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.applyReplacementFun.aux"><span class="name">ToAdditive</span>.<span class="name">applyReplacementFun</span>.<span class="name">aux</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.etaExpandN"><span class="name">ToAdditive</span>.<span class="name">etaExpandN</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.expand"><span class="name">ToAdditive</span>.<span class="name">expand</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.reorderForall"><span class="name">ToAdditive</span>.<span class="name">reorderForall</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.reorderLambda"><span class="name">ToAdditive</span>.<span class="name">reorderLambda</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.updateDecl"><span class="name">ToAdditive</span>.<span class="name">updateDecl</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.findTargetName"><span class="name">ToAdditive</span>.<span class="name">findTargetName</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.findAuxDecls"><span class="name">ToAdditive</span>.<span class="name">findAuxDecls</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.transformDeclAux"><span class="name">ToAdditive</span>.<span class="name">transformDeclAux</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.copyInstanceAttribute"><span class="name">ToAdditive</span>.<span class="name">copyInstanceAttribute</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.warnExt"><span class="name">ToAdditive</span>.<span class="name">warnExt</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.warnAttr"><span class="name">ToAdditive</span>.<span class="name">warnAttr</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.warnParametricAttr"><span class="name">ToAdditive</span>.<span class="name">warnParametricAttr</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.additivizeLemmas"><span class="name">ToAdditive</span>.<span class="name">additivizeLemmas</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.firstMultiplicativeArg"><span class="name">ToAdditive</span>.<span class="name">firstMultiplicativeArg</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.capitalizeLikeAux"><span class="name">ToAdditive</span>.<span class="name">capitalizeLikeAux</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.capitalizeLike"><span class="name">ToAdditive</span>.<span class="name">capitalizeLike</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.capitalizeFirstLike"><span class="name">ToAdditive</span>.<span class="name">capitalizeFirstLike</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.nameDict"><span class="name">ToAdditive</span>.<span class="name">nameDict</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.applyNameDict"><span class="name">ToAdditive</span>.<span class="name">applyNameDict</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.fixAbbreviation"><span class="name">ToAdditive</span>.<span class="name">fixAbbreviation</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.guessName"><span class="name">ToAdditive</span>.<span class="name">guessName</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.targetName"><span class="name">ToAdditive</span>.<span class="name">targetName</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.proceedFieldsAux"><span class="name">ToAdditive</span>.<span class="name">proceedFieldsAux</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.proceedFields"><span class="name">ToAdditive</span>.<span class="name">proceedFields</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.elabToAdditive"><span class="name">ToAdditive</span>.<span class="name">elabToAdditive</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.applyAttributes"><span class="name">ToAdditive</span>.<span class="name">applyAttributes</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.copyMetaData"><span class="name">ToAdditive</span>.<span class="name">copyMetaData</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.transformDecl"><span class="name">ToAdditive</span>.<span class="name">transformDecl</span></a></div><div class="nav_link"><a class="break_within" href="#ToAdditive.addToAdditiveAttr"><span class="name">ToAdditive</span>.<span class="name">addToAdditiveAttr</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-to-additive-attribute">The <code>@[to_additive]</code> attribute. <a class="hover-link" href="#The-to-additive-attribute">#</a></h1><p>The attribute <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> can be used to automatically transport theorems
and definitions (but not inductive types and structures) from a multiplicative
theory to an additive theory.</p></div><div class="decl" id="to_additive_ignore_args"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L35-L36">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_ignore_args"><span class="name">to_additive_ignore_args</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The  <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_ignore_args">to_additive_ignore_args</a></code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-to_additive_ignore_args" class="instances-for-list"></ul></details></div></div><div class="decl" id="to_additive_relevant_arg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L37-L38">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_relevant_arg"><span class="name">to_additive_relevant_arg</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The  <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_relevant_arg">to_additive_relevant_arg</a></code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-to_additive_relevant_arg" class="instances-for-list"></ul></details></div></div><div class="decl" id="to_additive_reorder"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L39-L40">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_reorder"><span class="name">to_additive_reorder</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The  <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_reorder">to_additive_reorder</a></code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-to_additive_reorder" class="instances-for-list"></ul></details></div></div><div class="decl" id="to_additive_change_numeral"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L41-L42">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_change_numeral"><span class="name">to_additive_change_numeral</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The  <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_change_numeral">to_additive_change_numeral</a></code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-to_additive_change_numeral" class="instances-for-list"></ul></details></div></div><div class="decl" id="toAdditiveAttrOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L43-L44">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#toAdditiveAttrOption"><span class="name">toAdditiveAttrOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>An <code>attr := ...</code> option for <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-toAdditiveAttrOption" class="instances-for-list"></ul></details></div></div><div class="decl" id="toAdditiveReorderOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L45-L46">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#toAdditiveReorderOption"><span class="name">toAdditiveReorderOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.reorder">reorder</a> := ...</code> option for <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-toAdditiveReorderOption" class="instances-for-list"></ul></details></div></div><div class="decl" id="toAdditiveParenthesizedOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L47-L48">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#toAdditiveParenthesizedOption"><span class="name">toAdditiveParenthesizedOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Options to <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-toAdditiveParenthesizedOption" class="instances-for-list"></ul></details></div></div><div class="decl" id="toAdditiveOption"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L49-L50">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#toAdditiveOption"><span class="name">toAdditiveOption</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Options to <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-toAdditiveOption" class="instances-for-list"></ul></details></div></div><div class="decl" id="toAdditiveRest"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L51-L52">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#toAdditiveRest"><span class="name">toAdditiveRest</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Remaining arguments of <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-toAdditiveRest" class="instances-for-list"></ul></details></div></div><div class="decl" id="to_additive"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L53-L54">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#to_additive"><span class="name">to_additive</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-to_additive" class="instances-for-list"></ul></details></div></div><div class="decl" id="attrTo_additive?_"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L57-L57">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#attrTo_additive?_"><span class="name">attrTo_additive?_</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#attrTo_additive?_">attrTo_additive?_</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`attrTo_additive?_</span> <span class="fn">1022</span>
    (<span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> (<span class="fn"><a href="../.././Init/Prelude.html#Lean.ParserDescr.nonReservedSymbol">Lean.ParserDescr.nonReservedSymbol</a> <span class="fn">&quotto_additive?&quot</span> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>) <a href="../.././Mathlib/Tactic/ToAdditive.html#toAdditiveRest">toAdditiveRest</a></span>)</span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-attrTo_additive?_" class="instances-for-list"></ul></details></div></div><div class="decl" id="endCapitalNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L68-L71">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#endCapitalNames"><span class="name">endCapitalNames</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/RBMap.html#Lean.RBMap">Lean.RBMap</a> <a href="../.././Init/Prelude.html#String">String</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>) <span class="fn">compare</span></span></div></div><p>A set of strings of names that end in a capital letter.</p><ul>
<li>If the string contains a lowercase letter, the string should be split between the first occurrence
of a lower-case letter followed by an upper-case letter.</li>
<li>If multiple strings have the same prefix, they should be grouped by prefix</li>
<li>In this case, the second list should be prefix-free
(no element can be a prefix of a later element)</li>
</ul><p>Todo: automate the translation from <code><a href="../.././Init/Prelude.html#String">String</a></code> to an element in this <code>RBMap</code>
(but this would require having something similar to the <code>rb_lmap</code> from Lean 3).</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#endCapitalNames">endCapitalNames</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Lean/Data/RBMap.html#Lean.RBMap.ofList">Lean.RBMap.ofList</a> <span class="fn">[<span class="fn">(<span class="fn">&quotLE&quot</span>, <span class="fn">[<span class="fn">&quot&quot</span>]</span>)</span>, <span class="fn">(<span class="fn">&quotLT&quot</span>, <span class="fn">[<span class="fn">&quot&quot</span>]</span>)</span>, <span class="fn">(<span class="fn">&quotWF&quot</span>, <span class="fn">[<span class="fn">&quot&quot</span>]</span>)</span>, <span class="fn">(<span class="fn">&quotCoe&quot</span>, <span class="fn">[<span class="fn">&quotTC&quot</span>, <span class="fn">&quotT&quot</span>, <span class="fn">&quotHTCT&quot</span>]</span>)</span>]</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-endCapitalNames" class="instances-for-list"></ul></details></div></div><div class="decl" id="String.splitCase"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L80-L102">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#String.splitCase"><span class="name">String</span>.<span class="name">splitCase</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(i₀ : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#String.Pos">String.Pos</a> <span class="fn">0</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(r : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span>) <span class="fn">[]</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></div></div><p>This function takes a String and splits it into separate parts based on the following
(naming conventions)[https://github.com/leanprover-community/mathlib4/wiki#naming-convention].</p><p>E.g. <code>#eval  "InvHMulLEConjugate₂SMul_ne_top".<a href="../.././Mathlib/Tactic/ToAdditive.html#String.splitCase">splitCase</a></code> yields
<code>["Inv", "HMul", "LE", "Conjugate₂", "SMul", "_", "ne", "_", "top"]</code>.</p></div></div><div class="decl" id="ToAdditive.linter.toAdditiveReorder"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L109-L112">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.linter.toAdditiveReorder"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">toAdditiveReorder</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter to check that the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.reorder">reorder</a></code> attribute is not given manually</p></div></div><div class="decl" id="ToAdditive.linter.existingAttributeWarning"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L114-L119">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.linter.existingAttributeWarning"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">existingAttributeWarning</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter, mostly used by <code>@[to_additive]</code>, that checks that the source declaration doesn't have
certain attributes</p></div></div><div class="decl" id="ToAdditive.linter.toAdditiveGenerateName"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L121-L125">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.linter.toAdditiveGenerateName"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">toAdditiveGenerateName</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter to check that the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> attribute is not given manually</p></div></div><div class="decl" id="ToAdditive.linter.toAdditiveExisting"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L127-L132">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.linter.toAdditiveExisting"><span class="name">ToAdditive</span>.<span class="name">linter</span>.<span class="name">toAdditiveExisting</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Linter to check whether the user correctly specified that the additive declaration already
exists</p></div></div><div class="decl" id="ToAdditive.ignoreArgsAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L135-L150">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.ignoreArgsAttr"><span class="name">ToAdditive</span>.<span class="name">ignoreArgsAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Std/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></div></div><p>An attribute that tells <code>@[to_additive]</code> that certain arguments of this definition are not
involved when using <code>@[to_additive]</code>.
This helps the heuristic of <code>@[to_additive]</code> by also transforming definitions if <code>ℕ</code> or another
fixed type occurs as one of these arguments.</p></div></div><div class="decl" id="ToAdditive.reorderAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L152-L172">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.reorderAttr"><span class="name">ToAdditive</span>.<span class="name">reorderAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Std/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span>)</span></div></div><p>An attribute that stores all the declarations that needs their arguments reordered when
applying <code>@[to_additive]</code>. It is applied automatically by the <code>(reorder := ...)</code> syntax of
<code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>, and should not usually be added manually.</p></div></div><div class="decl" id="ToAdditive.relevantArgAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L174-L201">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.relevantArgAttr"><span class="name">ToAdditive</span>.<span class="name">relevantArgAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Std/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>An attribute that is automatically added to declarations tagged with <code>@[to_additive]</code>, if needed.</p><p>This attribute tells which argument is the type where this declaration uses the multiplicative
structure. If there are multiple argument, we typically tag the first one.
If this argument contains a fixed type, this declaration will note be additivized.
See the Heuristics section of <code>to_additive.attr</code> for more details.</p><p>If a declaration is not tagged, it is presumed that the first argument is relevant.
<code>@[to_additive]</code> uses the function <code>to_additive.first_multiplicative_arg</code> to automatically tag
declarations. It is ok to update it manually if the automatic tagging made an error.</p><p>Implementation note: we only allow exactly 1 relevant argument, even though some declarations
(like <code>prod.group</code>) have multiple arguments with a multiplicative structure on it.
The reason is that whether we additivize a declaration is an all-or-nothing decision, and if
we will not be able to additivize declarations that (e.g.) talk about multiplication on <code>ℕ × α</code>
anyway.</p><p>Warning: interactions between this and the <code>(reorder := ...)</code> argument are not well-tested.</p></div></div><div class="decl" id="ToAdditive.changeNumeralAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L203-L226">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.changeNumeralAttr"><span class="name">ToAdditive</span>.<span class="name">changeNumeralAttr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Std/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></div></div><p>An attribute that stores all the declarations that deal with numeric literals on variable types.</p><p>Numeral literals occur in expressions without type information, so in order to decide whether <code>1</code>
needs to be changed to <code>0</code>, the context around the numeral is relevant.
Most numerals will be in an <code><a href="../.././Init/Prelude.html#OfNat.ofNat">OfNat.ofNat</a></code> application, though tactics can add numeral literals
inside arbitrary functions. By default we assume that we do not change numerals, unless it is
in a function application with the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive_change_numeral">to_additive_change_numeral</a></code> attribute.</p><p><code>@[to_additive_change_numeral n₁ ...]</code> should be added to all functions that take one or more
numerals as argument that should be changed if <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest">additiveTest</a></code> succeeds on the first argument,
i.e. when the numeral is only translated if the first argument is a variable
(or consists of variables).
The arguments <code>n₁ ...</code> are the positions of the numeral arguments (starting counting from 1).</p></div></div><div class="decl" id="ToAdditive.translations"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L228-L229">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.translations"><span class="name">ToAdditive</span>.<span class="name">translations</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Std/Lean/NameMapAttribute.html#Lean.NameMapExtension">Lean.NameMapExtension</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p>Maps multiplicative names to their additive counterparts.</p></div></div><div class="decl" id="ToAdditive.findTranslation?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L232-L233">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.findTranslation?"><span class="name">ToAdditive</span>.<span class="name">findTranslation?</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span></div></div><p>Get the multiplicative → additive translation for the given name.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.findTranslation?">ToAdditive.findTranslation?</a> <span class="fn">env</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap.find?">Lean.NameMap.find?</a> (<span class="fn"><a href="../.././Lean/Environment.html#Lean.SimplePersistentEnvExtension.getState">Lean.SimplePersistentEnvExtension.getState</a> <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.translations">ToAdditive.translations</a> <span class="fn">env</span></span>)</span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.findTranslation?" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.insertTranslation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L236-L244">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.insertTranslation"><span class="name">ToAdditive</span>.<span class="name">insertTranslation</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(failIfExists : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Add a (multiplicative → additive) name translation to the translations map.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.insertTranslation" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.Config"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L247-L273">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config"><span class="name">ToAdditive</span>.<span class="name">Config</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><ul class="structure_fields" id="ToAdditive.Config.mk"><li id="ToAdditive.Config.trace" class="structure_field"><div class="structure_field_doc"><p>View the trace of the to_additive procedure.
Equivalent to <code>set_option <a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">trace.to_additive</a> true</code>.</p></div><div class="structure_field_info">trace : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="ToAdditive.Config.tgt" class="structure_field"><div class="structure_field_doc"><p>The name of the target (the additive declaration).</p></div><div class="structure_field_info">tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></div></li><li id="ToAdditive.Config.doc" class="structure_field"><div class="structure_field_doc"><p>An optional doc string.</p></div><div class="structure_field_info">doc : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#String">String</a></span></div></li><li id="ToAdditive.Config.allowAutoName" class="structure_field"><div class="structure_field_doc"><p>If <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.allowAutoName">allowAutoName</a></code> is <code>false</code> (default) then
<code>@[to_additive]</code> will check whether the given name can be auto-generated.</p></div><div class="structure_field_info">allowAutoName : <a href="../.././Init/Prelude.html#Bool">Bool</a></div></li><li id="ToAdditive.Config.reorder" class="structure_field"><div class="structure_field_doc"><p>The arguments that should be reordered by <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>, using cycle notation.</p></div><div class="structure_field_info">reorder : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></div></li><li id="ToAdditive.Config.attrs" class="structure_field"><div class="structure_field_doc"><p>The attributes which we want to give to both the multiplicative and additive versions.
For certain attributes (such as <code>simp</code> and <code>simps</code>) this will also add generated lemmas to the
translation dictionary.</p></div><div class="structure_field_info">attrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></li><li id="ToAdditive.Config.ref" class="structure_field"><div class="structure_field_doc"><p>The <code>Syntax</code> element corresponding to the original multiplicative declaration
(or the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> attribute if it is added later),
which we need for adding definition ranges.</p></div><div class="structure_field_info">ref : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div></li><li id="ToAdditive.Config.existing" class="structure_field"><div class="structure_field_doc"><p>An optional flag stating whether the additive declaration already exists.
If this flag is set but wrong about whether the additive declaration exists, <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> will
raise a linter error.
Note: the linter will never raise an error for inductive types and structures.</p></div><div class="structure_field_info">existing : <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></li></ul><p><code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">Config</a></code> is the type of the arguments that can be provided to <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.Config" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.instReprConfig"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L273-L273">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.instReprConfig"><span class="name">ToAdditive</span>.<span class="name">instReprConfig</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.instReprConfig">ToAdditive.instReprConfig</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../.././Mathlib/Tactic/ToAdditive.html#_private.Mathlib.Tactic.ToAdditive.0.ToAdditive.reprConfig._@.Mathlib.Tactic.ToAdditive._hyg.2678">ToAdditive.reprConfig✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="ToAdditive.additiveTestUnsafe"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L287-L314">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTestUnsafe"><span class="name">ToAdditive</span>.<span class="name">additiveTestUnsafe</span></a></span><span class="decl_args">
<span class="fn">(findTranslation? : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ignore : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Implementation function for <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest">additiveTest</a></code>.
We cache previous applications of the function, using the same method that <code>Expr.find?</code> uses,
to avoid visiting the same subexpression many times. Note that we only need to cache the
expressions without taking the value of <code>inApp</code> into account, since <code>inApp</code> only matters when
the expression is a constant. However, for this reason we have to make sure that we never
cache constant expressions, so that's why the <code>if</code>s in the implementation are in this order.</p><p>Note that this function is still called many times by <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyReplacementFun">applyReplacementFun</a></code>
and we're not remembering the cache between these calls.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.additiveTestUnsafe" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.additiveTestUnsafe.visit"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L290-L313">source</a></div><div class="decl_header"><span class="decl_kind">unsafe def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTestUnsafe.visit"><span class="name">ToAdditive</span>.<span class="name">additiveTestUnsafe</span>.<span class="name">visit</span></a></span><span class="decl_args">
<span class="fn">(findTranslation? : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ignore : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(size : <a href="../.././Init/Prelude.html#USize">USize</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(inApp : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Control/Option.html#OptionT">OptionT</a> <a href="../.././Lean/Util/FindExpr.html#Lean.Expr.FindImpl.FindM">Lean.Expr.FindImpl.FindM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.additiveTestUnsafe.visit" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.additiveTest"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L325-L327">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest"><span class="name">ToAdditive</span>.<span class="name">additiveTest</span></a></span><span class="decl_args">
<span class="fn">(findTranslation? : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ignore : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Bool">Bool</a></div></div><p><code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest">additiveTest</a> e</code> tests whether the expression <code>e</code> contains no constant
<code>nm</code> that is not applied to any arguments, and such that <code>translations.find?[nm] = none</code>.
This is used in <code>@[to_additive]</code> for deciding which subexpressions to transform: we only transform
constants if <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest">additiveTest</a></code> applied to their first argument returns <code>true</code>.
This means we will replace expression applied to e.g. <code>α</code> or <code>α × β</code>, but not when applied to
e.g. <code>ℕ</code> or <code>ℝ × α</code>.
We ignore all arguments specified by the <code>ignore</code> <code>NameMap</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest">ToAdditive.additiveTest</a> <span class="fn">findTranslation?</span> <span class="fn">ignore</span> <span class="fn">e</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additiveTest.impl._@.Mathlib.Tactic.ToAdditive._hyg.3560">ToAdditive.additiveTest.impl✝</a> <span class="fn">findTranslation?</span> <span class="fn">ignore</span> <span class="fn">e</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.additiveTest" class="instances-for-list"></ul></details></div></div><div class="decl" id="List.swapFirstTwo"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L330-L333">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#List.swapFirstTwo"><span class="name">List</span>.<span class="name">swapFirstTwo</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a> u_1}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">α</span></span> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">α</span></span></span></div></div><p>Swap the first two elements of a list</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#List.swapFirstTwo">List.swapFirstTwo</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn">[]</span> =&gt <span class="fn">[]</span>
  | <span class="fn">[<span class="fn">x</span>]</span> =&gt <span class="fn">[<span class="fn">x</span>]</span>
  | <span class="fn"><span class="fn">x</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn"><span class="fn">y</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">l</span></span></span> =&gt <span class="fn"><span class="fn">y</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn"><span class="fn">x</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">l</span></span></span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-List.swapFirstTwo" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.changeNumeral"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L337-L339">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.changeNumeral"><span class="name">ToAdditive</span>.<span class="name">changeNumeral</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Change the numeral <code>nat_lit 1</code> to the numeral <code>nat_lit 0</code>.
Leave all other expressions unchanged.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.changeNumeral">ToAdditive.changeNumeral</a> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr.lit">Lean.Expr.lit</a> (<span class="fn"><a href="../.././Lean/Expr.html#Lean.Literal.natVal">Lean.Literal.natVal</a> <span class="fn">1</span></span>)</span> =&gt <span class="fn"><a href="../.././Lean/Expr.html#Lean.mkRawNatLit">Lean.mkRawNatLit</a> <span class="fn">0</span></span>
  | <span class="fn">e</span> =&gt <span class="fn">e</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.changeNumeral" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.applyReplacementFun"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L352-L431">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyReplacementFun"><span class="name">ToAdditive</span>.<span class="name">applyReplacementFun</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p><code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyReplacementFun">applyReplacementFun</a> e</code> replaces the expression <code>e</code> with its additive counterpart.
It translates each identifier (inductive type, defined function etc) in an expression, unless</p><ul>
<li>The identifier occurs in an application with first argument <code>arg</code>; and</li>
<li><code>test arg</code> is false.
However, if <code>f</code> is in the dictionary <code>relevant</code>, then the argument <code>relevant.find f</code>
is tested, instead of the first argument.</li>
</ul><p>It will also reorder arguments of certain functions, using <code>reorderFn</code>:
e.g. <code>g x₁ x₂ x₃ ... xₙ</code> becomes <code>g x₂ x₁ x₃ ... xₙ</code> if <code>reorderFn g = some [1]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.applyReplacementFun" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.applyReplacementFun.aux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L360-L431">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyReplacementFun.aux"><span class="name">ToAdditive</span>.<span class="name">applyReplacementFun</span>.<span class="name">aux</span></a></span><span class="decl_args">
<span class="fn">(findTranslation? : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(reorderFn : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(ignore : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(changeNumeral? : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(relevantArg : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(trace : <a href="../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Implementation of <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyReplacementFun">applyReplacementFun</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.applyReplacementFun.aux" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.etaExpandN"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L434-L435">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.etaExpandN"><span class="name">ToAdditive</span>.<span class="name">etaExpandN</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Eta expands <code>e</code> at most <code>n</code> times.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.etaExpandN" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.expand"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L440-L464">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.expand"><span class="name">ToAdditive</span>.<span class="name">expand</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p><code>e.<a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.expand">expand</a></code> eta-expands all expressions that have as head a constant <code>n</code> in
<code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.reorder">reorder</a></code>. They are expanded until they are applied to one more argument than the maximum in
<code>reorder.find n</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.expand" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.reorderForall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L467-L471">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.reorderForall"><span class="name">ToAdditive</span>.<span class="name">reorderForall</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(reorder : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span>) <span class="fn">[]</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Reorder pi-binders. See doc of <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.reorderAttr">reorderAttr</a></code> for the interpretation of the argument</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.reorderForall" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.reorderLambda"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L474-L478">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.reorderLambda"><span class="name">ToAdditive</span>.<span class="name">reorderLambda</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(reorder : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span>) <span class="fn">[]</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Reorder lambda-binders. See doc of <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.reorderAttr">reorderAttr</a></code> for the interpretation of the argument</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.reorderLambda" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.updateDecl"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L481-L493">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.updateDecl"><span class="name">ToAdditive</span>.<span class="name">updateDecl</span></a></span><span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(srcDecl : <a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a>)</span></span>
<span class="decl_args">
<span class="fn">(reorder : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> (<span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span>) <span class="fn">[]</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Lean/Declaration.html#Lean.ConstantInfo">Lean.ConstantInfo</a></span></div></div><p>Run applyReplacementFun on the given <code>srcDecl</code> to make a new declaration with name <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.tgt">tgt</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.updateDecl" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.findTargetName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L496-L515">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.findTargetName"><span class="name">ToAdditive</span>.<span class="name">findTargetName</span></a></span><span class="decl_args">
<span class="fn">(env : <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(pre : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt_pre : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p>Find the target name of <code>pre</code> and all created auxiliary declarations.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.findTargetName" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.findAuxDecls"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L525-L531">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.findAuxDecls"><span class="name">ToAdditive</span>.<span class="name">findAuxDecls</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(pre : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(mainModule : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Lean/Data/NameMap.html#Lean.NameSet">Lean.NameSet</a></div></div><p>Returns a <code>NameSet</code> of all auxiliary constants in <code>e</code> that might have been generated
when adding <code>pre</code> to the environment.
Examples include <code>pre.match_5</code>, <code>Mathlib.MyFile._auxLemma.3</code> and
<code>_private.Mathlib.MyFile.someOtherNamespace.someOtherDeclaration._eq_2</code>.
The last two examples may or may not have been generated by this declaration.
The last example may or may not be the equation lemma of a declaration with the <code>@[to_additive]</code>
attribute. We will only translate it has the <code>@[to_additive]</code> attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.findAuxDecls" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.transformDeclAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L538-L604">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.transformDeclAux"><span class="name">ToAdditive</span>.<span class="name">transformDeclAux</span></a></span><span class="decl_args">
<span class="fn">(cfg : <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(pre : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt_pre : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></span></div></div><p>transform the declaration <code>src</code> and all declarations <code>pre._proof_i</code> occurring in <code>src</code>
using the transforms dictionary.
<code>replace_all</code>, <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.trace">trace</a></code>, <code>ignore</code> and <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.reorder">reorder</a></code> are configuration options.
<code>pre</code> is the declaration that got the <code>@[to_additive]</code> attribute and <code>tgt_pre</code> is the target of this
declaration.</p></div></div><div class="decl" id="ToAdditive.copyInstanceAttribute"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L609-L614">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.copyInstanceAttribute"><span class="name">ToAdditive</span>.<span class="name">copyInstanceAttribute</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Copy the instance attribute in a <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code></p><p>[todo] it seems not to work when the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> is added as an attribute later.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.copyInstanceAttribute" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.warnExt"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L617-L627">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnExt"><span class="name">ToAdditive</span>.<span class="name">warnExt</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{σ : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">σ</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(ext : <span class="fn"><a href="../.././Lean/Environment.html#Lean.PersistentEnvExtension">Lean.PersistentEnvExtension</a> <span class="fn">α</span> <span class="fn">β</span> <span class="fn">σ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">σ</span> → <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(thisAttr : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(attrName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Warn the user when the multiplicative declaration has an attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.warnExt" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.warnAttr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L630-L632">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnAttr"><span class="name">ToAdditive</span>.<span class="name">warnAttr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <span class="fn">β</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(attr : <span class="fn"><a href="../.././Lean/ScopedEnvExtension.html#Lean.SimpleScopedEnvExtension">Lean.SimpleScopedEnvExtension</a> <span class="fn">α</span> <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">β</span> → <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <a href="../.././Init/Prelude.html#Bool">Bool</a></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(thisAttr : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(attrName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Warn the user when the multiplicative declaration has a simple scoped attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnAttr">ToAdditive.warnAttr</a> <span class="fn">stx</span> <span class="fn">attr</span> <span class="fn">f</span> <span class="fn">thisAttr</span> <span class="fn">attrName</span> <span class="fn">src</span> <span class="fn">tgt</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnExt">ToAdditive.warnExt</a> <span class="fn">stx</span> <span class="fn"><span class="fn">attr</span>.ext</span> (<span class="fn">fun <span class="fn">x</span> <span class="fn">x_1</span> =&gt <span class="fn"><span class="fn">f</span> <span class="fn">(<span class="fn"><a href="../.././Init/Data/List/BasicAux.html#List.head!">List.head!</a> <span class="fn"><span class="fn">x</span>.stateStack</span></span>).state</span> <span class="fn">x_1</span></span></span>) <span class="fn">thisAttr</span> <span class="fn">attrName</span> <span class="fn">src</span> <span class="fn">tgt</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.warnAttr" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.warnParametricAttr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L635-L637">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnParametricAttr"><span class="name">ToAdditive</span>.<span class="name">warnParametricAttr</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <a href="../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(attr : <span class="fn"><a href="../.././Lean/Attributes.html#Lean.ParametricAttribute">Lean.ParametricAttribute</a> <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(thisAttr : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(attrName : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Warn the user when the multiplicative declaration has a parametric attribute.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnParametricAttr">ToAdditive.warnParametricAttr</a> <span class="fn">stx</span> <span class="fn">attr</span> <span class="fn">thisAttr</span> <span class="fn">attrName</span> <span class="fn">src</span> <span class="fn">tgt</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.warnExt">ToAdditive.warnExt</a> <span class="fn">stx</span> <span class="fn"><span class="fn">attr</span>.ext</span> (<span class="fn">fun <span class="fn">x</span> <span class="fn">x_1</span> =&gt <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap.contains">Lean.NameMap.contains</a> <span class="fn">x</span> <span class="fn">x_1</span></span></span>) <span class="fn">thisAttr</span> <span class="fn">attrName</span> <span class="fn">src</span> <span class="fn">tgt</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.warnParametricAttr" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.additivizeLemmas"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L642-L651">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.additivizeLemmas"><span class="name">ToAdditive</span>.<span class="name">additivizeLemmas</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../.././foundational_types.html">Type</a> → <a href="../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Lean/Exception.html#Lean.MonadError">Lean.MonadError</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href="../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(names : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(desc : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(t : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><span class="fn">m</span> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code>runAndAdditivize names desc t</code> runs <code>t</code> on all elements of <code>names</code>
and adds translations between the generated lemmas (the output of <code>t</code>).
<code>names</code> must be non-empty.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.additivizeLemmas" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.firstMultiplicativeArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L660-L677">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.firstMultiplicativeArg"><span class="name">ToAdditive</span>.<span class="name">firstMultiplicativeArg</span></a></span><span class="decl_args">
<span class="fn">(nm : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>Find the first argument of <code>nm</code> that has a multiplicative type-class on it.
Returns 1 if there are no types with a multiplicative class as arguments.
E.g. <code>Prod.Group</code> returns 1, and <code>Pi.One</code> returns 2.
Note: we only consider the first argument of each type-class.
E.g. <code>[Pow A N]</code> is a multiplicative type-class on <code>A</code>, not on <code>N</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.firstMultiplicativeArg" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.capitalizeLikeAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L680-L690">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeLikeAux"><span class="name">ToAdditive</span>.<span class="name">capitalizeLikeAux</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(i : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#String.Pos">String.Pos</a> <span class="fn">0</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(p : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#String">String</a></div></div><p>Helper for <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeLike">capitalizeLike</a></code>.</p></div></div><div class="decl" id="ToAdditive.capitalizeLike"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L693-L694">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeLike"><span class="name">ToAdditive</span>.<span class="name">capitalizeLike</span></a></span><span class="decl_args">
<span class="fn">(r : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(s : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#String">String</a></div></div><p>Capitalizes <code>s</code> char-by-char like <code>r</code>. If <code>s</code> is longer, it leaves the tail untouched.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeLike">ToAdditive.capitalizeLike</a> <span class="fn">r</span> <span class="fn">s</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeLikeAux">ToAdditive.capitalizeLikeAux</a> <span class="fn">r</span> <span class="fn">0</span> <span class="fn">s</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.capitalizeLike" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.capitalizeFirstLike"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L699-L701">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeFirstLike"><span class="name">ToAdditive</span>.<span class="name">capitalizeFirstLike</span></a></span><span class="decl_args">
<span class="fn">(s : <a href="../.././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></span></div></div><p>Capitalize First element of a list like <code>s</code>.
Note that we need to capitalize multiple characters in some cases,
in examples like <code><a href="../.././Init/Prelude.html#HMul">HMul</a></code> or <code>hAdd</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeFirstLike">ToAdditive.capitalizeFirstLike</a> <span class="fn">s</span> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">x</span> with
  | <span class="fn"><span class="fn">x</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">r</span></span> =&gt <span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeLike">ToAdditive.capitalizeLike</a> <span class="fn">s</span> <span class="fn">x</span></span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">r</span></span>
  | <span class="fn">[]</span> =&gt <span class="fn">[]</span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.capitalizeFirstLike" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.nameDict"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L710-L736">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.nameDict"><span class="name">ToAdditive</span>.<span class="name">nameDict</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#String">String</a> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></span></div></div><p>Dictionary used by <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.guessName">guessName</a></code> to autogenerate names.</p><p>Note: <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.guessName">guessName</a></code> capitalizes first element of the output according to
capitalization of the input. Input and first element should therefore be lower-case,
2nd element should be capitalized properly.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.nameDict" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.applyNameDict"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L742-L744">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyNameDict"><span class="name">ToAdditive</span>.<span class="name">applyNameDict</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></span></div></div><p>Turn each element to lower-case, apply the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.nameDict">nameDict</a></code> and
capitalize the output like the input.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyNameDict">ToAdditive.applyNameDict</a> (<span class="fn"><span class="fn">x_1</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">r</span></span>)</span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.capitalizeFirstLike">ToAdditive.capitalizeFirstLike</a> <span class="fn">x_1</span> (<span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.nameDict">ToAdditive.nameDict</a> (<span class="fn"><a href="../.././Init/Data/String/Basic.html#String.toLower">String.toLower</a> <span class="fn">x_1</span></span>)</span>)</span> <a href="../.././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyNameDict">ToAdditive.applyNameDict</a> <span class="fn">r</span></span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyNameDict">ToAdditive.applyNameDict</a> <span class="fn">[]</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">[]</span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.applyNameDict" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.fixAbbreviation"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L753-L809">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.fixAbbreviation"><span class="name">ToAdditive</span>.<span class="name">fixAbbreviation</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#String">String</a></span></span></div></div><p>There are a few abbreviations we use. For example "Nonneg" instead of "ZeroLE"
or "addComm" instead of "commAdd".
Note: The input to this function is case sensitive!
Todo: A lot of abbreviations here are manual fixes and there might be room to
improve the naming logic to reduce the size of <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.fixAbbreviation">fixAbbreviation</a></code>.</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.fixAbbreviation" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.guessName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L818-L824">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.guessName"><span class="name">ToAdditive</span>.<span class="name">guessName</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#String">String</a> → <a href="../.././Init/Prelude.html#String">String</a></span></div></div><p>Autogenerate additive name.
This runs in several steps:</p><ol>
<li>Split according to capitalisation rule and at <code>_</code>.</li>
<li>Apply word-by-word translation rules.</li>
<li>Fix up abbreviations that are not word-by-word translations, like "addComm" or "Nonneg".</li>
</ol><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.guessName">ToAdditive.guessName</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Data/String/Defs.html#String.mapTokens">String.mapTokens</a> (<span class="fn"><a href="../.././Init/Prelude.html#Char.ofNat">Char.ofNat</a> <span class="fn">39</span></span>) <span class="fn">fun <span class="fn">s</span> =&gt
    <span class="fn"><a href="../.././Init/Data/String/Basic.html#String.join">String.join</a> (<span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.fixAbbreviation">ToAdditive.fixAbbreviation</a> (<span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyNameDict">ToAdditive.applyNameDict</a> (<span class="fn"><a href="../.././Mathlib/Tactic/ToAdditive.html#String.splitCase">String.splitCase</a> <span class="fn">s</span> <span class="fn">0</span></span>)</span>)</span>)</span></span></span></span></li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.guessName" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.targetName"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L827-L844">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.targetName"><span class="name">ToAdditive</span>.<span class="name">targetName</span></a></span><span class="decl_args">
<span class="fn">(cfg : <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span></div></div><p>Return the provided target name or autogenerate one if one was not provided.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.targetName" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.proceedFieldsAux"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L848-L857">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.proceedFieldsAux"><span class="name">ToAdditive</span>.<span class="name">proceedFieldsAux</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> → <span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>if <code>f src = #[a_1, ..., a_n]</code> and <code>f <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.tgt">tgt</a> = #[b_1, ... b_n]</code> then <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.proceedFieldsAux">proceedFieldsAux</a> src <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.tgt">tgt</a> f</code>
will insert translations from <code>src.a_i</code> to <code>tgt.b_i</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.proceedFieldsAux" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.proceedFields"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L861-L870">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.proceedFields"><span class="name">ToAdditive</span>.<span class="name">proceedFields</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Add the structure fields of <code>src</code> to the translations dictionary
so that future uses of <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> will map them to the corresponding <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.tgt">tgt</a></code> fields.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.proceedFields" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.elabToAdditive"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L873-L897">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.elabToAdditive"><span class="name">ToAdditive</span>.<span class="name">elabToAdditive</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a> → <span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a></span></span></div></div><p>Elaboration of the configuration options for <code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-ToAdditive.elabToAdditive" class="instances-for-list"></ul></details></div></div><div class="decl" id="ToAdditive.applyAttributes"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L901-L967">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.applyAttributes"><span class="name">ToAdditive</span>.<span class="name">applyAttributes</span></a></span><span class="decl_args">
<span class="fn">(stx : <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(rawAttrs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(thisAttr : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></div></div><p>Apply attributes to the multiplicative and additive declarations.</p></div></div><div class="decl" id="ToAdditive.copyMetaData"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L972-L984">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.copyMetaData"><span class="name">ToAdditive</span>.<span class="name">copyMetaData</span></a></span><span class="decl_args">
<span class="fn">(cfg : <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></div></div><p>Copies equation lemmas and attributes from <code>src</code> to <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config.tgt">tgt</a></code></p></div></div><div class="decl" id="ToAdditive.transformDecl"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L991-L993">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.transformDecl"><span class="name">ToAdditive</span>.<span class="name">transformDecl</span></a></span><span class="decl_args">
<span class="fn">(cfg : <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(tgt : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/CoreM.html#Lean.Core.CoreM">Lean.CoreM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></div></div><p>Make a new copy of a declaration, replacing fragments of the names of identifiers in the type and
the body using the <code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.translations">translations</a></code> dictionary.
This is used to implement <code>@[to_additive]</code>.</p></div></div><div class="decl" id="ToAdditive.addToAdditiveAttr"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/44c828ca5b12983ef1d4eea5c54f95c2ef52cb36/Mathlib/Tactic/ToAdditive.lean#L999-L1041">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.addToAdditiveAttr"><span class="name">ToAdditive</span>.<span class="name">addToAdditiveAttr</span></a></span><span class="decl_args">
<span class="fn">(src : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(cfg : <a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.Config">ToAdditive.Config</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Lean/Attributes.html#Lean.AttributeKind">Lean.AttributeKind</a> <a href="../.././Lean/Attributes.html#Lean.AttributeKind.global">Lean.AttributeKind.global</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Lean/Attributes.html#Lean.AttrM">Lean.AttrM</a> (<span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a></span>)</span></div></div><p><code><a href="../.././Mathlib/Tactic/ToAdditive.html#ToAdditive.addToAdditiveAttr">addToAdditiveAttr</a> src cfg</code> adds a <code>@[to_additive]</code> attribute to <code>src</code> with configuration <code>cfg</code>.
See the attribute implementation for more details.
It returns an array with names of additive declarations (usually 1, but more if there are nested
<code><a href="../.././Mathlib/Tactic/ToAdditive.html#to_additive">to_additive</a></code> calls.</p></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>